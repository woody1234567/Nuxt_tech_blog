---
title: 向量資料庫運作原理：從直覺概念到實務流程
description: 深入解析向量資料庫（Vector Database）的核心原理，理解它如何透過 Embedding 技術將語意轉化為空間距離，並實現高效的相似度搜尋。
tags: [vector-database, ai, embedding, rag, similarity-search]
category: web_dev
date: 2026-02-19
---

# 向量資料庫運作原理：建立完整心智模型

在 AI 應用、語意搜尋（Semantic Search）、RAG（Retrieval-Augmented Generation）與推薦系統快速成長的今天，「向量資料庫（Vector Database）」已成為不可或缺的基礎設施。

但向量資料庫到底在做什麼？它跟一般資料庫有什麼不同？為什麼它能實現「語意搜尋」？這篇文章將帶你從直覺概念出發，一步步理解其運作機制。

---

## 一、核心問題：為什麼需要向量資料庫？

傳統資料庫（如 MySQL, PostgreSQL）擅長處理**精準查詢**。例如：
```sql
SELECT * FROM products WHERE category = "book";
```

然而，傳統資料庫難以處理「意思相近」的搜尋。當使用者搜尋「如何降低伺服器延遲」時，我們希望系統能找到「提升 API 響應速度的方法」或「減少系統 Latency 的技巧」。雖然字面上完全不同，但語意高度相關。傳統的 SQL 或關鍵字匹配（Keyword Search）很難精準完成這類任務，這就是向量資料庫發揮作用的地方。

---

## 二、什麼是向量（Vector）？

在 AI 的世界裡，「向量」是一串數字序列：
`[0.21, -0.84, 0.33, 0.91, ...]`

這串數字代表了某個物件（如文字、圖片、音訊）在「語意空間」中的座標位置。透過 **Embedding Model**，我們可以把複雜的內容轉換為數字向量，這個過程稱為 **Embedding（向量化）**。

### 語意是如何表示的？
假設我們有三句話：
1. 「貓在睡覺」
2. 「小貓在休息」
3. 「我今天吃牛排」

經過 Embedding 轉換後，在前兩句話的向量在數學空間中的距離會非常接近，而第三句話的向量則會離它們很遠。

> **語意相似 = 向量距離接近**

---

## 三、向量資料庫在做什麼？

向量資料庫的核心任務是：**幫你快速找到「距離最近的向量」**。

當使用者輸入一個搜尋問題時：
1. 把搜尋句子轉成向量。
2. 在資料庫中尋找距離最近的幾個向量（Similarity Search）。
3. 回傳對應的原始內容。

---

## 四、相似度是如何計算的？

常見的數學計算方式包括：
- **歐氏距離 (Euclidean Distance)**：計算兩點間的直線距離，距離越小越相似。
- **餘弦相似度 (Cosine Similarity)**：衡量兩個向量間的夾角，夾角越小（Cos 值越接近 1）代表語意越相近。這是自然語言處理中最常用的方式。
- **內積 (Dot Product)**：計算向量的點積。

---

## 五、大規模搜尋的挑戰：ANN 演算法

如果資料庫有 100 萬筆資料，每次搜尋都與所有向量進行比對會非常緩慢。為了提高效率，向量資料庫採用了 **ANN（Approximate Nearest Neighbor，近似最近鄰搜尋）** 技術。

其目標是：**不保證 100% 精準，但保證搜尋速度足夠快。**

常見的演算法如 **HNSW（Hierarchical Navigable Small World）**，它建立了一個多層的圖結構，讓搜尋從逐筆掃描變成了類似導航的過程，大幅縮短查詢時間。

---

## 六、完整運作流程（以 RAG 為例）

1.  **資料寫入 (Indexing)**：
    將原始文件通過 Embedding Model 轉為向量，連同原始文本與 Metadata（元數據）存入向量資料庫，並建立 ANN 索引。
2.  **查詢流程 (Querying)**：
    使用者提問 → 轉成向量 → ANN 搜尋最近的 K 個向量 → 取回內容 → 組成 Prompt 供 LLM 生成答案。

---

## 七、向量資料庫 vs 傳統資料庫

| 項目 | 傳統資料庫 | 向量資料庫 |
| :--- | :--- | :--- |
| **查詢方式** | 精準匹配 | 相似度搜尋 |
| **核心資料** | 結構化資料 | 高維向量 |
| **索引方式** | B-Tree 等 | ANN / HNSW |
| **使用場景** | 訂單、ERP、使用者管理 | AI 知識庫、搜尋、推薦 |

---

## 結論

你可以用一句話總結向量資料庫：**把「語意」轉成「空間距離」，然後用幾何方式做搜尋。**

當你理解了向量資料庫，你就能明白語意搜尋、推薦系統與 AI 知識庫背後的技術本質——它們都是在高維空間中尋找最接近的點。
